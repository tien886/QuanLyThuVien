<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:fa="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp" 
                    xmlns:sys="clr-namespace:System;assembly=mscorlib">

    <!-- Search bar -->
    <DropShadowEffect x:Key="FocusGlowEffect"
                    Color="DodgerBlue"
                    BlurRadius="15"
                    ShadowDepth="0"
                    Opacity="0.7"/>

    <!-- Style cho TextBox tìm kiếm với icon và hiệu ứng glow khi focus -->
    <Style x:Key="SearchTextBox" TargetType="TextBox">
        <Setter Property="Height" Value="40"/>
        <Setter Property="Width" Value="450"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="Foreground" Value="{StaticResource Black}"/>
        <Setter Property="Background" Value="{StaticResource White}"/>
        <Setter Property="BorderBrush" Value="{StaticResource Stroke}"/>
        <Setter Property="HorizontalAlignment" Value="Right"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="12,8,16,8"/>

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Grid>
                        <!-- Outer border that we can apply Effect to via Setters -->
                        <Border x:Name="Root"
                                CornerRadius="20"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <Border.Effect>
                                <DropShadowEffect x:Name="GlowEffect"
                                  Color="DodgerBlue"
                                  BlurRadius="0"
                                  ShadowDepth="0"
                                  Opacity="0"/>
                            </Border.Effect>
                        </Border>

                        <!-- Icon + Text host -->
                        <Grid Margin="14,0,14,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <fa:IconImage Grid.Column="0"
                                          Icon="MagnifyingGlass"
                                          Width="18" Height="18"
                                          VerticalAlignment="Center"
                                          Foreground="{StaticResource TitleOfWindow}"
                                          Margin="2,0,10,0"/>

                            <ScrollViewer x:Name="PART_ContentHost"
                                          Grid.Column="1"
                                          VerticalAlignment="Center"/>
                        </Grid>

                        <!-- Placeholder (Hint) -->
                        <TextBlock x:Name="Hint"
                                   Text="{TemplateBinding Tag}"
                                   Foreground="{StaticResource TitleOfWindow}"
                                   Opacity="0.7"
                                   FontSize="{TemplateBinding FontSize}"
                                   Margin="44,0,16,0"
                                   VerticalAlignment="Center"
                                   IsHitTestVisible="False"
                                   Visibility="Collapsed"/>
                    </Grid>

                    <!-- Triggers -->
                    <ControlTemplate.Triggers>
                        <!-- Hiện placeholder khi text rỗng -->
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="Text" Value=""/>
                                <Condition Property="IsKeyboardFocused" Value="False"/>
                            </MultiTrigger.Conditions>
                            <Setter TargetName="Hint" Property="Visibility" Value="Visible"/>
                        </MultiTrigger>

                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="Text" Value="{x:Null}"/>
                                <Condition Property="IsKeyboardFocused" Value="False"/>
                            </MultiTrigger.Conditions>
                            <Setter TargetName="Hint" Property="Visibility" Value="Visible"/>
                        </MultiTrigger>

                        <!-- Khi đang focus vào -->
                        <Trigger Property="IsKeyboardFocused" Value="True">
                            <Setter TargetName="Root" Property="Effect" Value="{StaticResource FocusGlowEffect}"/>
                            <Setter TargetName="Root" Property="BorderBrush" Value="DodgerBlue"/>
                            <Setter TargetName="Root" Property="BorderThickness" Value="1.5"/>
                            <Setter TargetName="Hint" Property="Visibility" Value="Collapsed"/>
                        </Trigger>

                        <!-- Khi mất focus -->
                        <Trigger Property="IsKeyboardFocused" Value="False">
                            <Setter TargetName="Root" Property="Effect">
                                <!-- Trả về DropShadowEffect rỗng -->
                                <Setter.Value>
                                    <DropShadowEffect Color="DodgerBlue"
                              BlurRadius="0"
                              ShadowDepth="0"
                              Opacity="0"/>
                                </Setter.Value>
                            </Setter>
                            <Setter TargetName="Root" Property="BorderBrush" Value="{StaticResource Stroke}"/>
                            <Setter TargetName="Root" Property="BorderThickness" Value="1"/>
                        </Trigger>

                        <!-- Optional: disabled state -->
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Root" Property="Opacity" Value="0.6"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ComboBox ToggleButton Template -->
    <ControlTemplate x:Key="ComboBoxToggleButton" TargetType="ToggleButton">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="32" />
            </Grid.ColumnDefinitions>

            <Border Grid.ColumnSpan="2"
                Name="Border"
                Background="Transparent"
                BorderBrush="Transparent"
                BorderThickness="0" />

            <fa:IconImage Grid.Column="1" 
                      Icon="ChevronDown"
                      Width="12" Height="12"
                      Foreground="{StaticResource TitleOfWindow}"
                      HorizontalAlignment="Center" 
                      VerticalAlignment="Center"/>
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="Border" Property="Background" Value="Transparent" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <!-- ComboBox -->
    <Style x:Key="RoundedComboBoxStyle" TargetType="ComboBox">
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="OverridesDefaultStyle" Value="True" />
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
        <Setter Property="ScrollViewer.CanContentScroll" Value="True"/>
        <Setter Property="MinHeight" Value="40"/>
        <Setter Property="Foreground" Value="{StaticResource Black}"/>
        <Setter Property="Background" Value="{StaticResource White}"/>
        <Setter Property="BorderBrush" Value="{StaticResource Stroke}"/>
        <Setter Property="BorderThickness" Value="1"/>

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ComboBox">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <Border x:Name="Border"
                                Grid.ColumnSpan="2"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10"
                                SnapsToDevicePixels="True"/>

                        <ToggleButton Name="ToggleButton"
                                      Template="{StaticResource ComboBoxToggleButton}"
                                      Grid.ColumnSpan="2" 
                                      Focusable="False"
                                      IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                      ClickMode="Press"/>

                        <ContentPresenter Name="ContentSite"
                                          Grid.Column="0"
                                          IsHitTestVisible="False"
                                          Margin="15,3,3,3"
                                          HorizontalAlignment="Left"
                                          VerticalAlignment="Center"
                                          Content="{TemplateBinding SelectionBoxItem}"
                                          ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                          ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"/>

                        <Popup Name="Popup"
                               Placement="Bottom"
                               IsOpen="{TemplateBinding IsDropDownOpen}"
                               AllowsTransparency="True"
                               Focusable="False"
                               PopupAnimation="Slide">
                            <Grid Name="DropDown"
                                  SnapsToDevicePixels="True"
                                  MinWidth="{TemplateBinding ActualWidth}"
                                  MaxHeight="{TemplateBinding MaxDropDownHeight}">
                                <Border x:Name="DropDownBorder"
                                        Background="{StaticResource White}"
                                        BorderBrush="{StaticResource Stroke}"
                                        BorderThickness="1"
                                        CornerRadius="10"
                                        Margin="0,5,0,0">
                                    <Border.Effect>
                                        <DropShadowEffect Color="Gray" BlurRadius="10" ShadowDepth="2" Opacity="0.1"/>
                                    </Border.Effect>
                                    <ScrollViewer Margin="4" SnapsToDevicePixels="True">
                                        <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                                    </ScrollViewer>
                                </Border>
                            </Grid>
                        </Popup>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <Trigger Property="HasItems" Value="false">
                            <Setter TargetName="DropDownBorder" Property="MinHeight" Value="95"/>
                        </Trigger>
                        <Trigger Property="IsGrouping" Value="true">
                            <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Style cho TextBox nhập liệu -->
    <Style x:Key="StandardTextBox" TargetType="TextBox">
        <Setter Property="Height" Value="45"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="Foreground" Value="{StaticResource Black}"/>
        <Setter Property="Background" Value="{StaticResource White}"/>
        <Setter Property="BorderBrush" Value="{StaticResource Stroke}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="12,0"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Grid>
                        <Border x:Name="Root" CornerRadius="8"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"/>

                        <ScrollViewer x:Name="PART_ContentHost"
                              Margin="{TemplateBinding Padding}"
                              VerticalAlignment="Center"/>

                        <TextBlock x:Name="Hint" Text="{TemplateBinding Tag}"
                           Foreground="{StaticResource TitleOfWindow}" Opacity="0.5"
                           FontSize="{TemplateBinding FontSize}"
                           Margin="{TemplateBinding Padding}"
                           VerticalAlignment="Center" IsHitTestVisible="False"
                           Visibility="Collapsed"/>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="Text" Value=""/>
                            </MultiTrigger.Conditions>
                            <Setter TargetName="Hint" Property="Visibility" Value="Visible"/>
                        </MultiTrigger>

                        <Trigger Property="IsKeyboardFocused" Value="True">
                            <Setter TargetName="Root" Property="BorderBrush" Value="{StaticResource ChanelBackground}"/>
                            <Setter TargetName="Root" Property="BorderThickness" Value="1.5"/>
                        </Trigger>

                        <Trigger Property="IsReadOnly" Value="True">
                            <Setter TargetName="Root" Property="Background" Value="#F3F4F6"/>
                            <Setter TargetName="Root" Property="BorderBrush" Value="Transparent"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    
</ResourceDictionary>